<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="viewport" content="user-scalable=no">
        <link rel="icon" href="icon/icon.png" type="image/png">
        <link rel="apple-touch-icon" href="icon/icon.png">
        <link rel="stylesheet" type="text/css" href="fonts/gamefont.css">
        <title>RPG Fantasy</title>
        <style>
            #logoutBtn {
                position: fixed;
                top: 10px;
                right: 10px;
                z-index: 9999;
                padding: 8px 16px;
                background-color: #ff4444;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-family: 'MedievalSharp', cursive;
                font-size: 16px;
            }
            #logoutBtn:hover {
                background-color: #cc0000;
            }
        </style>
    </head>
    <body style="background-color: black">
        <button id="logoutBtn">Logout</button>
        <!-- Load PIXI and dependencies first -->
        <script type="text/javascript" src="js/libs/pixi.js"></script>
        <script type="text/javascript" src="js/libs/pixi-tilemap.js"></script>
        <script type="text/javascript" src="js/libs/pixi-picture.js"></script>
        <script type="text/javascript" src="js/libs/fpsmeter.js"></script>
        <script type="text/javascript" src="js/libs/lz-string.js"></script>
        <script type="text/javascript" src="js/libs/iphone-inline-video.browser.js"></script>

        <!-- Then load RPG Maker core -->
        <script type="text/javascript" src="js/rpg_core.js"></script>
        <script type="text/javascript" src="js/rpg_managers.js"></script>
        <script type="text/javascript" src="js/rpg_objects.js"></script>
        <script type="text/javascript" src="js/rpg_scenes.js"></script>
        <script type="text/javascript" src="js/rpg_sprites.js"></script>
        <script type="text/javascript" src="js/rpg_windows.js"></script>

        <!-- Load plugins -->
        <script type="text/javascript" src="js/plugins.js"></script>
        <script type="text/javascript" src="js/plugins/LoginSystem.js" defer></script>

        <!-- Finally load main -->
        <script type="text/javascript" src="js/main.js"></script>

        <script>
        window.addEventListener('load', function() {
            const currentUser = localStorage.getItem("currentUser");
            if (!currentUser) {
                window.location.href = "login.php";
            }
        });
        document.getElementById('logoutBtn').addEventListener('click', function() {
         // Clear user data
         localStorage.removeItem('currentUser');
         sessionStorage.clear();
    
          // Redirect to login page
          window.location.href = '../login.php';
    });
        </script>

    </body>
</html>
